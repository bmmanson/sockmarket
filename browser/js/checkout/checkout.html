
<style>

.title-background {
	background-color: #E3CF57;
/*	background-color: #00EE00;*/
	border-radius: 5px;
}

.title-background h1 {
	color: white;
	/*margin-left: 20px;*/
	text-align: center;
	padding: 4px;
}

.results-content-checkout {
	background-color: #FAFAFA;
	min-height: 30px;
	padding: 4px;
	margin: 4px;
	border: 1px solid black;
	border-radius: 5px;
	border-color: #000000;
}

.thumbnail {
	background-color: #F0F0F0;
	display: inline-block;
	width: 90px;
	height: 90px;
}

.thumbnail:hover {
	background-color: #C6E2FF;
	cursor: pointer;
}

.thumbnail img {
	border-radius: 5px;
	display: block;
	margin: 10px auto auto auto;
}

.sock-title {
	padding-left: 20px;
}

</style>

<div class="container">
  <div ng-repeat="item in currentCart">
		<div class="row results-content-checkout">
	     <div class="col-md-4">
		       <div><strong>{{item.sock.title}}: </strong></div>
       </div>
       <div class="col-md-8">
         <div>Details - # of Pairs: {{item.quantity}}  $/Pair: {{item.sock.price}}  Item Total: {{item.sock.price * item.quantity}}</div>
       </div>
    </div>
	</div>
  <div class="results-content-checkout">
    <div class="col-md-4">
      <div><strong>Order Total: </strong></div>
    </div>
    <div class="col-md-8">
      <div>{{total}}</div>
    </div>
  </div>
  <div class="row results-content-checkout">
    <div class="col-md-4">
      <!-- <form action="" method="POST"> -->
        <script
          src="https://checkout.stripe.com/checkout.js" class="stripe-button"
          data-key="pk_test_6pRNASCoBOKtIshFeQd4XMUh"
          data-amount="999"
          data-name="Stripe.com"
          data-description="Widget"
          data-image="/img/documentation/checkout/marketplace.png"
          data-locale="auto">

          $(function() {
            var $form = $('#payment-form')
            $form.submit(function(event) {
              // Disable the submit button to prevent repeated clicks:
              $form.find('.submit').prop('disabled', true)
              // Request a token from Stripe:
              function stripeResponseHandler(status, response) {
                if (response.error) {
                  $('#charge-error').show();
                  $('.payment-errors').text(response.error.message);
                  $('.submit-button').removeAttr('disabled');
                  console.log(status)
                  console.log(response)
                } else {
                  var form$ = $('#payment-form');
                  var token = response.id;
                  form$.append('<input type="hidden" name="stripeToken" value="' + token + '"/>');
                  form$.get(0).submit();
                  console.log(status)
                  console.log(response)
                }
              }
              Stripe.card.createToken($form, stripeResponseHandler)
              // Prevent the form from being submitted:
              return false
            })
          })
        </script>
      <!-- </form> -->

      <form action="" method="" id="payment-form">
        <span class="payment-errors"></span>

        <div class="form-row">
          <label>
            <span>Card Number</span>
            <input type="text" size="20" data-stripe="number">
          </label>
        </div>

        <div class="form-row">
          <label>
            <span>Expiration (MM/YY)</span>
            <input type="text" size="2" data-stripe="exp_month">
          </label>
          <span> / </span>
          <input type="text" size="2" data-stripe="exp_year">
        </div>

        <div class="form-row">
          <label>
            <span>CVC</span>
            <input type="text" size="4" data-stripe="cvc">
          </label>
        </div>

        <button class="btn" type="submit" class="submit" value="">Submit Payment</button>
      </form>
    </div>
  </div>
</div>
